<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../resource/css/boardWrite.css">
    <!-- <script src="https://cdn.ckeditor.com/ckeditor5/31.1.0/classic/ckeditor.js"></script> -->
    <script src="../resource/lib/ckeditor5/build/ckeditor.js"></script>
</head>

<body>
    <div id="container">
        <div class="header">
            <div>
                <img src="../resource/img/logo.gif">
            </div>
            <div class="loginForm">
                <a href="">로그인</a>
            </div>
        </div>
        <div class="content">
            <div>
                <h2>문의하기</h2>
            </div>
            <div>
                <form id="form">
                    <div>
                        <div>
                            <label for="title">제목</label>
                        </div>
                        <div>
                            <input type="text" id="title" placeholder="제목을 입력해주세요">
                        </div>
                    </div>
                    <div>
                        <div>
                            <label for="content">문의내용</label>
                        </div>
                        <div>
                            <textarea id="content" name="content"></textarea>
                        </div>
                    </div>
                    <div>
                        <button>문의하기</button>
                    </div>
                </form>
            </div>

        </div>
        <div class="footer">
            <div>
                <img src="../resource/img/footerlogo.gif">
            </div>
            <div>
                <div>
                    <div>
                        <img src="../resource/img/mono.png">
                    </div>
                    <div>
                        <img src="../resource/img/stay.png">
                    </div>
                    <div>
                        <img src="../resource/img/shilla.png">
                    </div>
                </div>
                <div>
                    <div>
                        <img src="../resource/img/tel.gif" alt="">
                    </div>
                    <div>
                        <img src="../resource/img/intro.png" alt="">
                    </div>
                    <div>
                        <img src="../resource/img/sns.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="../js/boardClass.js"></script>
<script src="../js/boardManagerClass.js"></script>
<!-- <script src="../js/boardWrite.js"></script> -->
<script>

    let editor = null;
    const _form = document.querySelector("#form");
    function loginCheck() {
        const check = document.querySelector(".loginForm");

        const session = sessionStorage.getItem("currentUser") === null ? null : JSON.parse(sessionStorage.getItem("currentUser"));
        if (session !== null) {
            const _span = document.createElement("span");
            _span.innerHTML = "로그아웃"
            _span.onclick = () => {
                sessionStorage.clear();
                location.reload();
            }
            check.innerHTML = `<a href="">${session.nickname}님</a>`
            check.append(_span)
        }
    }
    async function main() {
        loginCheck();
        editor = await ClassicEditor.create(document.querySelector("#content"));
    }

    main();
    _form.onsubmit = (e) => {
        e.preventDefault();
        const _title = document.querySelector("#title").value;
        const manager = new BoardManager();
        const session = sessionStorage.getItem("currentUser") === null ? null : JSON.parse(sessionStorage.getItem("currentUser"));
        if (session !== null) {
            const board = new Board(_title, session.nickname, editor.getData(), manager.getBoardList().length);
            const list = new BoardManager();

            list.addBoard(board);
            location.href = "boardList.html";
        } else {
            alert("로그인 정보가 없습니다.")
        }
    }

</script>


</html>